<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/item/fish - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/item/fish.html#var">Var Details</a> - <a href="obj/item/fish.html#proc">Proc Details</a></header><main><h1>fish <aside>/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/fish.html">fish</a></aside> <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L7"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 7"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/item/fish.html#var/aquarium_vc_color">aquarium_vc_color</a></th><td>If present aquarium visual will be of this color</td></tr><tr><th><a href="obj/item/fish.html#var/average_size">average_size</a></th><td>Average size for this fish type in centimeters. Will be used as gaussian distribution with 20% deviation for fishing, bought fish are always standard size</td></tr><tr><th><a href="obj/item/fish.html#var/average_weight">average_weight</a></th><td>Average weight for this fish type in grams</td></tr><tr><th><a href="obj/item/fish.html#var/beauty">beauty</a></th><td>The beauty this fish provides to the aquarium it's inserted in.</td></tr><tr><th><a href="obj/item/fish.html#var/bites_amount">bites_amount</a></th><td>If you wonder why this isn't being tracked by the edible component instead:
We reset the this value when revived, and slowly chip it away as we heal.
Of course, it would be daunting to get this to be handled by the edible component
given its complexity.</td></tr><tr><th><a href="obj/item/fish.html#var/breeding_timeout">breeding_timeout</a></th><td>How long it takes to produce new fish</td></tr><tr><th><a href="obj/item/fish.html#var/breeding_wait">breeding_wait</a></th><td>The time limit before new fish can be created</td></tr><tr><th><a href="obj/item/fish.html#var/compatible_types">compatible_types</a></th><td>If set, the fish can also breed with these fishes types</td></tr><tr><th><a href="obj/item/fish.html#var/death_text">death_text</a></th><td>The message shown when the fish dies.</td></tr><tr><th><a href="obj/item/fish.html#var/dedicated_in_aquarium_icon">dedicated_in_aquarium_icon</a></th><td>this icon file will be used for in-aquarium visual for the fish</td></tr><tr><th><a href="obj/item/fish.html#var/dedicated_in_aquarium_icon_state">dedicated_in_aquarium_icon_state</a></th><td>The icon_state that will be used for in-aquarium visual for the fish
If not set, &quot;[initial(icon_state)]_small&quot; will be used instead</td></tr><tr><th><a href="obj/item/fish.html#var/disliked_bait">disliked_bait</a></th><td>Bait identifiers that make catching this fish harder and less likely
Bait identifiers: Path | Trait | list(&quot;Type&quot;=&quot;Foodtype&quot;,&quot;Value&quot;= Food Type Flag like [MEAT])</td></tr><tr><th><a href="obj/item/fish.html#var/electrogenesis_cooldown">electrogenesis_cooldown</a></th><td>cooldown on creating tesla zaps</td></tr><tr><th><a href="obj/item/fish.html#var/electrogenesis_power">electrogenesis_power</a></th><td>power of the tesla zap created by the fish in a bioelectric generator. Scales with size.</td></tr><tr><th><a href="obj/item/fish.html#var/evolution_types">evolution_types</a></th><td>A list of possible evolutions. If set, offsprings may be of a different, new fish type if conditions are met.</td></tr><tr><th><a href="obj/item/fish.html#var/favorite_bait">favorite_bait</a></th><td>Bait identifiers that make catching this fish easier and more likely
Bait identifiers: Path | Trait | list(&quot;Type&quot;=&quot;Foodtype&quot;,&quot;Value&quot;= Food Type Flag like [MEAT])</td></tr><tr><th><a href="obj/item/fish.html#var/feeding_frequency">feeding_frequency</a></th><td>How often the fish needs to be fed</td></tr><tr><th><a href="obj/item/fish.html#var/fillet_type">fillet_type</a></th><td>Fish autogenerated from this behaviour will be processable into this</td></tr><tr><th><a href="obj/item/fish.html#var/fish_flags">fish_flags</a></th><td>Flags for fish variables that would otherwise be TRUE/FALSE</td></tr><tr><th><a href="obj/item/fish.html#var/fish_movement_type">fish_movement_type</a></th><td>path to datums that dictate how the fish moves during the fishing minigame</td></tr><tr><th><a href="obj/item/fish.html#var/fish_traits">fish_traits</a></th><td>List of fish trait types, these may modify probabilty/difficulty depending on rod/user properties
or dictate how the fish behaves or some of its qualities.</td></tr><tr><th><a href="obj/item/fish.html#var/fishing_difficulty_modifier">fishing_difficulty_modifier</a></th><td>Base additive modifier to fishing difficulty</td></tr><tr><th><a href="obj/item/fish.html#var/food">food</a></th><td>What type of reagent this fish needs to be fed.</td></tr><tr><th><a href="obj/item/fish.html#var/health">health</a></th><td>Current fish health. Dies at 0.</td></tr><tr><th><a href="obj/item/fish.html#var/icon_state_dead">icon_state_dead</a></th><td>icon used when the fish is dead, ifset.</td></tr><tr><th><a href="obj/item/fish.html#var/last_feeding">last_feeding</a></th><td>Time of last the fish was fed</td></tr><tr><th><a href="obj/item/fish.html#var/maximum_size">maximum_size</a></th><td>The maximum size this fish can reach, calculated the first time update_size_and_weight() is called.</td></tr><tr><th><a href="obj/item/fish.html#var/maximum_weight">maximum_weight</a></th><td>The maximum weight this fish can reach, calculated the first time update_size_and_weight() is called.</td></tr><tr><th><a href="obj/item/fish.html#var/min_pressure">min_pressure</a></th><td>Outside of an aquarium, the pressure needs to be within these two variables for the environment to be safe.</td></tr><tr><th><a href="obj/item/fish.html#var/num_fillets">num_fillets</a></th><td>number of fillets given by the fish. It scales with its size.</td></tr><tr><th><a href="obj/item/fish.html#var/random_case_rarity">random_case_rarity</a></th><td>How rare this fish is in the random cases</td></tr><tr><th><a href="obj/item/fish.html#var/required_fluid_type">required_fluid_type</a></th><td>Required fluid type for this fish to live.</td></tr><tr><th><a href="obj/item/fish.html#var/required_temperature_max">required_temperature_max</a></th><td>Maximum possible temperature for the fish to live.</td></tr><tr><th><a href="obj/item/fish.html#var/required_temperature_min">required_temperature_min</a></th><td>Required minimum temperature for the fish to live.</td></tr><tr><th><a href="obj/item/fish.html#var/safe_air_limits">safe_air_limits</a></th><td>When outside of an aquarium, these gases that are checked (as well as pressure and temp) to assert if the environment is safe or not.</td></tr><tr><th><a href="obj/item/fish.html#var/size">size</a></th><td>Size in centimeters. Null until update_size_and_weight is called. Number of fillets and w_class scale with it.</td></tr><tr><th><a href="obj/item/fish.html#var/spawn_types">spawn_types</a></th><td>If set, when procreating these are the types of fish that will be generate instead of 'type'</td></tr><tr><th><a href="obj/item/fish.html#var/sprite_height">sprite_height</a></th><td>height of aquarium visual icon</td></tr><tr><th><a href="obj/item/fish.html#var/sprite_width">sprite_width</a></th><td>width of aquarium visual icon</td></tr><tr><th><a href="obj/item/fish.html#var/stable_population">stable_population</a></th><td>Won't breed more than this amount in single aquarium.</td></tr><tr><th><a href="obj/item/fish.html#var/status">status</a></th><td>Fish status</td></tr><tr><th><a href="obj/item/fish.html#var/weight">weight</a></th><td>Weight in grams. Null until update_size_and_weight is called. Grind results scale with it. Don't think too hard how a trout could fit in a blender.</td></tr><tr><th><a href="obj/item/fish.html#var/weight_size_deviation">weight_size_deviation</a></th><td>The general deviation from the average weight and size this fish has in the wild</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/item/fish.html#proc/UsedforProcessing">UsedforProcessing</a></th><td>When processed, the reagents inside this fish will be passed to the created atoms.</td></tr><tr><th><a href="obj/item/fish.html#proc/adjust_reagents_capacity">adjust_reagents_capacity</a></th><td>adjusts the maximum volume of the fish reagents holder and update the amount of food to bite</td></tr><tr><th><a href="obj/item/fish.html#proc/after_eat">after_eat</a></th><td>Fish is not a reagent holder yet it's edible, so it doen't behave like most other snacks
which means it has its own way of handling being bitten, which is defined here.</td></tr><tr><th><a href="obj/item/fish.html#proc/calculate_fish_force_bonus">calculate_fish_force_bonus</a></th><td>A proc that makes the fish slightly stronger or weaker if there's a noticeable discrepancy between size and weight.</td></tr><tr><th><a href="obj/item/fish.html#proc/check_liked">check_liked</a></th><td>Checks if the fish is liked or not when eaten by a human.</td></tr><tr><th><a href="obj/item/fish.html#proc/feed">feed</a></th><td>Feed the fishes with the contents of the fish feed</td></tr><tr><th><a href="obj/item/fish.html#proc/flop_animation">flop_animation</a></th><td>This flopping animation played while the fish is alive.</td></tr><tr><th><a href="obj/item/fish.html#proc/generate_fish_reagents">generate_fish_reagents</a></th><td>A proc that returns a static reagent holder with a set reagents that you'd get when eating this fish.</td></tr><tr><th><a href="obj/item/fish.html#proc/get_base_edible_reagents_to_add">get_base_edible_reagents_to_add</a></th><td>The proc that adds in the main reagents this fish has when eaten (without accounting for traits)</td></tr><tr><th><a href="obj/item/fish.html#proc/get_export_price">get_export_price</a></th><td>Returns the price of this fish, for the fish export.</td></tr><tr><th><a href="obj/item/fish.html#proc/get_food_types">get_food_types</a></th><td>A proc that returns the food types the edible component has when initialized.</td></tr><tr><th><a href="obj/item/fish.html#proc/get_hunger">get_hunger</a></th><td>Returns the 0-1 value for hunger</td></tr><tr><th><a href="obj/item/fish.html#proc/get_weight_rank">get_weight_rank</a></th><td>Weight, unlike size, is a bit more exponential, but the world isn't perfect, so isn't my code.
Anyway, this returns a gross estimate of the &quot;rank&quot; of &quot;category&quot; for our fish weight, based on how
weight generaly scales up (250, 500, 1000, 2000, 4000 etc...)</td></tr><tr><th><a href="obj/item/fish.html#proc/inherit_traits">inherit_traits</a></th><td>This proc has fish_traits list populated with fish_traits paths from three different lists:
traits from x_traits and y_traits are compared, and inserted if conditions are met;
traits from fixed_traits are inserted unconditionally.
traits from removed_traits will be removed from the for loop.</td></tr><tr><th><a href="obj/item/fish.html#proc/make_edible">make_edible</a></th><td>Main proc that makes the fish edible.</td></tr><tr><th><a href="obj/item/fish.html#proc/on_fish_cooked">on_fish_cooked</a></th><td>Kill the fish, remove the raw and gore food types, and the infectiveness too if not under-cooked.</td></tr><tr><th><a href="obj/item/fish.html#proc/on_fish_cooked_again">on_fish_cooked_again</a></th><td>Just kill the fish, again, and perhaps remove the infective comp.</td></tr><tr><th><a href="obj/item/fish.html#proc/on_grind">on_grind</a></th><td>Grinding a fish replaces some the protein it has with blood and gibs. You ain't getting a clean smoothie out of it.</td></tr><tr><th><a href="obj/item/fish.html#proc/on_temp_animation">on_temp_animation</a></th><td>Refreshes flopping animation after temporary animation finishes</td></tr><tr><th><a href="obj/item/fish.html#proc/proper_environment">proper_environment</a></th><td>Checks if our current environment lets us live.</td></tr><tr><th><a href="obj/item/fish.html#proc/randomize_size_and_weight">randomize_size_and_weight</a></th><td>Randomizes weight and size.</td></tr><tr><th><a href="obj/item/fish.html#proc/sate_hunger">sate_hunger</a></th><td>Proc that should be called when the fish is fed. By default, it grows the fish depending on various variables.</td></tr><tr><th><a href="obj/item/fish.html#proc/start_flopping">start_flopping</a></th><td>Starts flopping animation</td></tr><tr><th><a href="obj/item/fish.html#proc/stop_flopping">stop_flopping</a></th><td>Stops flopping animation</td></tr><tr><th><a href="obj/item/fish.html#proc/swim_animation">swim_animation</a></th><td>Create looping random path animation, pixel offsets parameters include offsets already</td></tr><tr><th><a href="obj/item/fish.html#proc/update_fish_force">update_fish_force</a></th><td>Reset weapon-related variables of this items and recalculates those values based on the fish weight and size.</td></tr><tr><th><a href="obj/item/fish.html#proc/update_size_and_weight">update_size_and_weight</a></th><td>Updates weight and size, along with weight class, number of fillets you can get and grind results.</td></tr><tr><th><a href="obj/item/fish.html#proc/well_cooked">well_cooked</a></th><td>The fish is well cooked. Change how the fish tastes, remove the infective comp and add the relative trait.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/aquarium_vc_color"><aside class="declaration">var </aside>aquarium_vc_color <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L42"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 42"></a></h3><p>If present aquarium visual will be of this color</p><h3 id="var/average_size"><aside class="declaration">var </aside>average_size <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L118"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 118"></a></h3><p>Average size for this fish type in centimeters. Will be used as gaussian distribution with 20% deviation for fishing, bought fish are always standard size</p><h3 id="var/average_weight"><aside class="declaration">var </aside>average_weight <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L125"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 125"></a></h3><p>Average weight for this fish type in grams</p><h3 id="var/beauty"><aside class="declaration">var </aside>beauty <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L149"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 149"></a></h3><p>The beauty this fish provides to the aquarium it's inserted in.</p><h3 id="var/bites_amount"><aside class="declaration">var </aside>bites_amount <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L157"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 157"></a></h3><p>If you wonder why this isn't being tracked by the edible component instead:
We reset the this value when revived, and slowly chip it away as we heal.
Of course, it would be daunting to get this to be handled by the edible component
given its complexity.</p><h3 id="var/breeding_timeout"><aside class="declaration">var </aside>breeding_timeout <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L81"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 81"></a></h3><p>How long it takes to produce new fish</p><h3 id="var/breeding_wait"><aside class="declaration">var </aside>breeding_wait <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L79"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 79"></a></h3><p>The time limit before new fish can be created</p><h3 id="var/compatible_types"><aside class="declaration">var </aside>compatible_types <aside>– /list</aside> <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L83"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 83"></a></h3><p>If set, the fish can also breed with these fishes types</p><h3 id="var/death_text"><aside class="declaration">var </aside>death_text <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L66"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 66"></a></h3><p>The message shown when the fish dies.</p><h3 id="var/dedicated_in_aquarium_icon"><aside class="declaration">var </aside>dedicated_in_aquarium_icon <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L34"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 34"></a></h3><p>this icon file will be used for in-aquarium visual for the fish</p><h3 id="var/dedicated_in_aquarium_icon_state"><aside class="declaration">var </aside>dedicated_in_aquarium_icon_state <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L39"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 39"></a></h3><p>The icon_state that will be used for in-aquarium visual for the fish
If not set, &quot;[initial(icon_state)]_small&quot; will be used instead</p><h3 id="var/disliked_bait"><aside class="declaration">var </aside>disliked_bait <aside>– /list</aside> <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L113"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 113"></a></h3><p>Bait identifiers that make catching this fish harder and less likely
Bait identifiers: Path | Trait | list(&quot;Type&quot;=&quot;Foodtype&quot;,&quot;Value&quot;= Food Type Flag like [MEAT])</p><h3 id="var/electrogenesis_cooldown"><aside class="declaration">var </aside>electrogenesis_cooldown <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L144"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 144"></a></h3><p>cooldown on creating tesla zaps</p><h3 id="var/electrogenesis_power"><aside class="declaration">var </aside>electrogenesis_power <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L146"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 146"></a></h3><p>power of the tesla zap created by the fish in a bioelectric generator. Scales with size.</p><h3 id="var/evolution_types"><aside class="declaration">var </aside>evolution_types <aside>– /list</aside> <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L87"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 87"></a></h3><p>A list of possible evolutions. If set, offsprings may be of a different, new fish type if conditions are met.</p><h3 id="var/favorite_bait"><aside class="declaration">var </aside>favorite_bait <aside>– /list</aside> <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L107"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 107"></a></h3><p>Bait identifiers that make catching this fish easier and more likely
Bait identifiers: Path | Trait | list(&quot;Type&quot;=&quot;Foodtype&quot;,&quot;Value&quot;= Food Type Flag like [MEAT])</p><h3 id="var/feeding_frequency"><aside class="declaration">var </aside>feeding_frequency <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L54"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 54"></a></h3><p>How often the fish needs to be fed</p><h3 id="var/fillet_type"><aside class="declaration">var </aside>fillet_type <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L72"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 72"></a></h3><p>Fish autogenerated from this behaviour will be processable into this</p><h3 id="var/fish_flags"><aside class="declaration">var </aside>fish_flags <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L26"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 26"></a></h3><p>Flags for fish variables that would otherwise be TRUE/FALSE</p><h3 id="var/fish_movement_type"><aside class="declaration">var </aside>fish_movement_type <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L98"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 98"></a></h3><p>path to datums that dictate how the fish moves during the fishing minigame</p><h3 id="var/fish_traits"><aside class="declaration">var </aside>fish_traits <aside>– /list</aside> <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L95"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 95"></a></h3><p>List of fish trait types, these may modify probabilty/difficulty depending on rod/user properties
or dictate how the fish behaves or some of its qualities.</p><h3 id="var/fishing_difficulty_modifier"><aside class="declaration">var </aside>fishing_difficulty_modifier <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L101"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 101"></a></h3><p>Base additive modifier to fishing difficulty</p><h3 id="var/food"><aside class="declaration">var </aside>food <aside>– /<a href="datum.html">datum</a>/<a href="datum/reagent.html">reagent</a></aside> <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L52"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 52"></a></h3><p>What type of reagent this fish needs to be fed.</p><h3 id="var/health"><aside class="declaration">var </aside>health <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L64"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 64"></a></h3><p>Current fish health. Dies at 0.</p><h3 id="var/icon_state_dead"><aside class="declaration">var </aside>icon_state_dead <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L61"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 61"></a></h3><p>icon used when the fish is dead, ifset.</p><h3 id="var/last_feeding"><aside class="declaration">var </aside>last_feeding <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L56"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 56"></a></h3><p>Time of last the fish was fed</p><h3 id="var/maximum_size"><aside class="declaration">var </aside>maximum_size <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L120"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 120"></a></h3><p>The maximum size this fish can reach, calculated the first time update_size_and_weight() is called.</p><h3 id="var/maximum_weight"><aside class="declaration">var </aside>maximum_weight <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L127"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 127"></a></h3><p>The maximum weight this fish can reach, calculated the first time update_size_and_weight() is called.</p><h3 id="var/min_pressure"><aside class="declaration">var </aside>min_pressure <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L140"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 140"></a></h3><p>Outside of an aquarium, the pressure needs to be within these two variables for the environment to be safe.</p><h3 id="var/num_fillets"><aside class="declaration">var </aside>num_fillets <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L74"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 74"></a></h3><p>number of fillets given by the fish. It scales with its size.</p><h3 id="var/random_case_rarity"><aside class="declaration">var </aside>random_case_rarity <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L69"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 69"></a></h3><p>How rare this fish is in the random cases</p><h3 id="var/required_fluid_type"><aside class="declaration">var </aside>required_fluid_type <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L45"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 45"></a></h3><p>Required fluid type for this fish to live.</p><h3 id="var/required_temperature_max"><aside class="declaration">var </aside>required_temperature_max <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L49"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 49"></a></h3><p>Maximum possible temperature for the fish to live.</p><h3 id="var/required_temperature_min"><aside class="declaration">var </aside>required_temperature_min <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L47"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 47"></a></h3><p>Required minimum temperature for the fish to live.</p><h3 id="var/safe_air_limits"><aside class="declaration">var </aside>safe_air_limits <aside>– /list</aside> <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L133"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 133"></a></h3><p>When outside of an aquarium, these gases that are checked (as well as pressure and temp) to assert if the environment is safe or not.</p><h3 id="var/size"><aside class="declaration">var </aside>size <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L116"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 116"></a></h3><p>Size in centimeters. Null until update_size_and_weight is called. Number of fillets and w_class scale with it.</p><h3 id="var/spawn_types"><aside class="declaration">var </aside>spawn_types <aside>– /list</aside> <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L85"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 85"></a></h3><p>If set, when procreating these are the types of fish that will be generate instead of 'type'</p><h3 id="var/sprite_height"><aside class="declaration">var </aside>sprite_height <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 31"></a></h3><p>height of aquarium visual icon</p><h3 id="var/sprite_width"><aside class="declaration">var </aside>sprite_width <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 29"></a></h3><p>width of aquarium visual icon</p><h3 id="var/stable_population"><aside class="declaration">var </aside>stable_population <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L77"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 77"></a></h3><p>Won't breed more than this amount in single aquarium.</p><h3 id="var/status"><aside class="declaration">var </aside>status <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L59"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 59"></a></h3><p>Fish status</p><h3 id="var/weight"><aside class="declaration">var </aside>weight <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L123"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 123"></a></h3><p>Weight in grams. Null until update_size_and_weight is called. Grind results scale with it. Don't think too hard how a trout could fit in a blender.</p><h3 id="var/weight_size_deviation"><aside class="declaration">var </aside>weight_size_deviation <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L130"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 130"></a></h3><p>The general deviation from the average weight and size this fish has in the wild</p><h2 id="proc">Proc Details</h2><h3 id="proc/UsedforProcessing">UsedforProcessing<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/used_item, /list/chosen_option, /list/created_atoms)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L381"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 381"></a></aside></h3><p>When processed, the reagents inside this fish will be passed to the created atoms.</p><h3 id="proc/adjust_reagents_capacity"><aside class="declaration">proc </aside>adjust_reagents_capacity<aside>(amount_to_add)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L363"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 363"></a></aside></h3><p>adjusts the maximum volume of the fish reagents holder and update the amount of food to bite</p><h3 id="proc/after_eat"><aside class="declaration">proc </aside>after_eat<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/eater, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/feeder)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L317"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 317"></a></aside></h3><p>Fish is not a reagent holder yet it's edible, so it doen't behave like most other snacks
which means it has its own way of handling being bitten, which is defined here.</p><h3 id="proc/calculate_fish_force_bonus"><aside class="declaration">proc </aside>calculate_fish_force_bonus<aside>(bonus_malus)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L602"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 602"></a></aside></h3><p>A proc that makes the fish slightly stronger or weaker if there's a noticeable discrepancy between size and weight.</p><h3 id="proc/check_liked"><aside class="declaration">proc </aside>check_liked<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/eater)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L304"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 304"></a></aside></h3><p>Checks if the fish is liked or not when eaten by a human.</p><h3 id="proc/feed"><aside class="declaration">proc </aside>feed<aside>(/<a href="datum.html">datum</a>/<a href="datum/reagents.html">reagents</a>/fed_reagents)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L714"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 714"></a></aside></h3><p>Feed the fishes with the contents of the fish feed</p><h3 id="proc/flop_animation"><aside class="declaration">proc </aside>flop_animation<aside>()  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L1173"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 1173"></a></aside></h3><p>This flopping animation played while the fish is alive.</p><h3 id="proc/generate_fish_reagents"><aside class="declaration">proc </aside>generate_fish_reagents<aside>(multiplier)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L330"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 330"></a></aside></h3><p>A proc that returns a static reagent holder with a set reagents that you'd get when eating this fish.</p><h3 id="proc/get_base_edible_reagents_to_add"><aside class="declaration">proc </aside>get_base_edible_reagents_to_add<aside>()  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L349"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 349"></a></aside></h3><p>The proc that adds in the main reagents this fish has when eaten (without accounting for traits)</p><h3 id="proc/get_export_price"><aside class="declaration">proc </aside>get_export_price<aside>(price, percent)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L1243"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 1243"></a></aside></h3><p>Returns the price of this fish, for the fish export.</p><h3 id="proc/get_food_types"><aside class="declaration">proc </aside>get_food_types<aside>()  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L250"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 250"></a></aside></h3><p>A proc that returns the food types the edible component has when initialized.</p><h3 id="proc/get_hunger"><aside class="declaration">proc </aside>get_hunger<aside>()  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L705"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 705"></a></aside></h3><p>Returns the 0-1 value for hunger</p><h3 id="proc/get_weight_rank"><aside class="declaration">proc </aside>get_weight_rank<aside>()  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L555"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 555"></a></aside></h3><p>Weight, unlike size, is a bit more exponential, but the world isn't perfect, so isn't my code.
Anyway, this returns a gross estimate of the &quot;rank&quot; of &quot;category&quot; for our fish weight, based on how
weight generaly scales up (250, 500, 1000, 2000, 4000 etc...)</p><h3 id="proc/inherit_traits"><aside class="declaration">proc </aside>inherit_traits<aside>(/list/x_traits, /list/y_traits, /list/fixed_traits, /list/removed_traits)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L635"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 635"></a></aside></h3><p>This proc has fish_traits list populated with fish_traits paths from three different lists:
traits from x_traits and y_traits are compared, and inserted if conditions are met;
traits from fixed_traits are inserted unconditionally.
traits from removed_traits will be removed from the for loop.</p>
<p>This proc should only be called if the fish was spawned with the apply_qualities arg set to FALSE
and hasn't had inherited traits already.</p><h3 id="proc/make_edible"><aside class="declaration">proc </aside>make_edible<aside>()  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L227"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 227"></a></aside></h3><p>Main proc that makes the fish edible.</p><h3 id="proc/on_fish_cooked"><aside class="declaration">proc </aside>on_fish_cooked<aside>(/<a href="datum.html">datum</a>/source, cooking_time)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L254"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 254"></a></aside></h3><p>Kill the fish, remove the raw and gore food types, and the infectiveness too if not under-cooked.</p><h3 id="proc/on_fish_cooked_again"><aside class="declaration">proc </aside>on_fish_cooked_again<aside>(/<a href="datum.html">datum</a>/source, cooking_time)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L287"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 287"></a></aside></h3><p>Just kill the fish, again, and perhaps remove the infective comp.</p><h3 id="proc/on_grind"><aside class="parent"><a title="/obj/item" href="obj/item.html#proc/on_grind">↑</a></aside>on_grind<aside>()  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L373"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 373"></a></aside></h3><p>Grinding a fish replaces some the protein it has with blood and gibs. You ain't getting a clean smoothie out of it.</p><h3 id="proc/on_temp_animation"><aside class="declaration">proc </aside>on_temp_animation<aside>(/<a href="datum.html">datum</a>/source, animation_duration)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L1219"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 1219"></a></aside></h3><p>Refreshes flopping animation after temporary animation finishes</p><h3 id="proc/proper_environment"><aside class="declaration">proc </aside>proper_environment<aside>(temp_range_min, temp_range_max)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L993"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 993"></a></aside></h3><p>Checks if our current environment lets us live.</p><h3 id="proc/randomize_size_and_weight"><aside class="declaration">proc </aside>randomize_size_and_weight<aside>(base_size, base_weight, deviation)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L440"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 440"></a></aside></h3><p>Randomizes weight and size.</p><h3 id="proc/sate_hunger"><aside class="declaration">proc </aside>sate_hunger<aside>()  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L751"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 751"></a></aside></h3><p>Proc that should be called when the fish is fed. By default, it grows the fish depending on various variables.</p><h3 id="proc/start_flopping"><aside class="declaration">proc </aside>start_flopping<aside>()  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L1206"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 1206"></a></aside></h3><p>Starts flopping animation</p><h3 id="proc/stop_flopping"><aside class="declaration">proc </aside>stop_flopping<aside>()  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L1213"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 1213"></a></aside></h3><p>Stops flopping animation</p><h3 id="proc/swim_animation"><aside class="declaration">proc </aside>swim_animation<aside>(/<a href="obj.html">obj</a>/<a href="obj/structure/aquarium.html">structure/aquarium</a>/current_aquarium, /<a href="obj.html">obj</a>/<a href="obj/effect/aquarium.html">effect/aquarium</a>/visual)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L951"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 951"></a></aside></h3><p>Create looping random path animation, pixel offsets parameters include offsets already</p><h3 id="proc/update_fish_force"><aside class="declaration">proc </aside>update_fish_force<aside>()  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L559"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 559"></a></aside></h3><p>Reset weapon-related variables of this items and recalculates those values based on the fish weight and size.</p><h3 id="proc/update_size_and_weight"><aside class="declaration">proc </aside>update_size_and_weight<aside>(new_size, new_weight)  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L450"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 450"></a></aside></h3><p>Updates weight and size, along with weight class, number of fillets you can get and grind results.</p><h3 id="proc/well_cooked"><aside class="declaration">proc </aside>well_cooked<aside>()  <a href="https://github.com/MrMelbert/MapleStationCode/blob/c341637f130c528d9e478c069a855c193f76b98f/code/modules/fishing/fish/_fish.dm#L295"><img src="git.png" width="16" height="16" title="code/modules/fishing/fish/_fish.dm 295"></a></aside></h3><p>The fish is well cooked. Change how the fish tastes, remove the infective comp and add the relative trait.</p></main><footer>maplestation.dme <a href="https://github.com/MrMelbert/MapleStationCode/tree/c341637f130c528d9e478c069a855c193f76b98f">c341637</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>